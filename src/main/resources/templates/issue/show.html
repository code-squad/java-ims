{{#partial "comment"}}
<div class="issues-back">
    <a href="/" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon back-btn" subject="go back"
       role="button">
        <i class="material-icons" role="presentation">arrow_back</i>
    </a>
</div>
{{#issue}}
<div class="issues__posts mdl-grid">
    <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
        <div class="mdl-card__menu">
            <a href="/issue/{{id}}/form" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                <i class="material-icons">edit</i>
            </a>
            <form style="display:inline-block" class="form-delete" action="/issue/{{id}}" method="POST">
                <input type="hidden" name="_method" value="DELETE">
                <button class="mdl-button mdl-js-button mdl-button--icon" type="submit">
                    <i class="material-icons">delete</i>
                </button>
            </form>
        </div>
        <div class="mdl-card__title mdl-color-text--grey-50">
            <i class="material-icons">check_circle</i>
            <h2 class="mdl-card__title-text">{{subject}}</h2>
        </div>

        <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
            <img class="minilogo" height="48" width="48"
                 src="https://avatars2.githubusercontent.com/u/520500?v=3&s=140" alt="javajigi">
            <div style="margin-right:20px;">
                <div class="author-text">
                    <strong>
                        <a href="https://github.com/{{userId}}" class="author">{{writer}}</a>
                    </strong>
                </div>
                <span>{{formattedCreateDate}}</span>
            </div>
            <a href="/issue/1/setOpen" class="mdl-button mdl-button--colored mdl-js-button">
                Close issue
            </a>

            <div class="section-spacer"></div>

            <button id="milestone-menu" class="mdl-button mdl-js-button">
                Milestone
            </button>
            <!-- milestone list -->
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                for="milestone-menu">
                {{#milestone}}
                <li class="mdl-menu__item mdl-button--accent">
                    <a href="/issue/{{id}}/setMilestone/{{milestone.id}}">{{milestone.subject}}</a>
                </li>
                {{/milestone}}
                {{#milestones}}
                <li class="mdl-menu__item">
                    <a href="/issue/{{issue.id}}/setMilestone/{{id}}">{{subject}}</a>
                </li>
                {{/milestones}}
            </ul>

            <button id="label-menu" class="mdl-button mdl-js-button">
                Label
            </button>
            <!-- label list -->
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                for="label-menu">
                {{#label}}
                <li class="mdl-menu__item mdl-button--accent">
                    <a href="/issue/{{id}}/setMilestone/{{label.id}}">{{label.subject}}</a>
                </li>
                {{/label}}
                {{#labels}}
                <li class="mdl-menu__item">
                    <a href="/issue/{{issue.id}}/setLabel/{{id}}">{{subject}}</a>
                </li>
                {{/labels}}
            </ul>

            <button id="assignee-menu" class="mdl-button mdl-js-button">
                Assignee
            </button>
            <!-- label list -->
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                for="assignee-menu">
                {{#assignee}}
                <li class="mdl-menu__item mdl-button--accent">
                    <a href="/issue/{{id}}/setMilestone/{{assignee.id}}">{{assignee.name}}</a>
                </li>
                {{/assignee}}
                {{#assignees}}
                <li class="mdl-menu__item">
                    <a href="/issue/{{issue.id}}/setAssignee/{{id}}">{{name}}</a>
                </li>
                {{/assignees}}
            </ul>
        </div>
        <div class="mdl-color-text--grey-700 mdl-card__supporting-text">
            <p>{{comment}}</p>
        </div>
        <div class="mdl-color-text--primary-contrast mdl-card__supporting-text comments" id="comment_list">

            <!-- comments start -->
            {{#answers}}
            <div class="comment mdl-color-text--grey-700">
                <header class="comment__header">
                    <img class="comment__avatar2" height="48" width="48"
                         src="https://avatars2.githubusercontent.com/u/520500?v=3&s=140" alt="javajigi">
                    <div class="comment__author">
                        <strong>
                            <a>{{userId}}</a>


                            <span>{{comment}} on  {{formattedCreateDate}}</span>

                            <a href="/api/issue/{{issue.id}}/answers/{{id}}" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect updateFrom_answer">
                                <i class="material-icons">edit</i>
                            </a>
                            <form style="display:inline-block" class="form-delete" action="/api/issue/{{issue.id}}/answers/{{id}}" method="POST">
                                <input type="hidden" name="_method" value="DELETE">
                                <button class="mdl-button mdl-js-button mdl-button--icon" type="submit">
                                    <i class="material-icons">delete</i>
                                </button>
                            </form>

                        </strong>
                    </div>
                </header>
            </div>
            <hr>
            {{/answers}}

            <!-- comments end -->
        </div>
        <form action="/issue/1/uploadFile" enctype="multipart/form-data" method="POST">
            <div style="margin:10px;">
                <input type="file" name="file" id="file"/>
                <button class="mdl-button" type="submit">upload file</button>
            </div>
        </form>
        <div class="mdl-color-text--primary-contrast mdl-card__supporting-text new-comment">
            <form class="submit-write" action="/api/issue/{{id}}/answers" method="POST">
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                    <textarea rows=5 class="mdl-textfield__input" id="comment" name="comment"></textarea>
                    <label for="comment" class="mdl-textfield__label">Leave a comment</label>
                </div>
                <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="commentbtn">
                    <i class="material-icons" role="presentation">check</i><span class="visuallyhidden">add comment</span>
                </button>
            </form>
        </div>
    </div>
</div>

<script type="text/template" id="answerTemplate">
    <div class="comment mdl-color-text--grey-700">
        <header class="comment__header">
            <img class="comment__avatar2" height="48" width="48"
                 src="https://avatars3.githubusercontent.com/u/14341811?v=3&s=400" alt="진저애비">
            <div class="comment__author">
                <strong>
                    <a>{0}</a>

                    <span>{1} on {2}</span>

                    <a href="/api/issue/{3}/answers/{4}" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect updateFrom_answer">
                        <i class="material-icons">edit</i>
                    </a>
                    <form style="display:inline-block" class="form-delete" action="/api/issue/1/answers/1" method="POST">
                        <input type="hidden" name="_method" value="DELETE">
                        <button class="mdl-button mdl-js-button mdl-button--icon" type="submit">
                            <i class="material-icons">delete</i>
                        </button>
                    </form>

                </strong>
            </div>
        </header>
    </div>
    <hr>
</script>
<!--<div style="background-color:white; margin-top:10px" id="answerDiv">
    <form action="/issue/1/uploadFile" enctype="multipart/form-data" method="POST">
        <div style="margin:10px;">
            <input type="file" name="file" id="updateFile"/>
            <button class="mdl-button" type="submit">upload file</button>
        </div>
        <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button&#45;&#45;icon">
            <i class="material-icons" role="presentation">check</i>
            <span class="visuallyhidden">add comment</span>
        </button>
    </form>
    <div class="mdl-color-text&#45;&#45;primary-contrast mdl-card__supporting-text new-comment">
        <form action="{0}" method="POST">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield&#45;&#45;floating-label">
                <textarea rows=5 class="mdl-textfield__input" id="updateComment" name="comment">{1}</textarea>
                <label for="comment" class="mdl-textfield__label"> </label>
            </div>
            <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button&#45;&#45;icon updateAnswerBtn">
                <i class="material-icons" role="presentation">check</i>
                <span class="visuallyhidden">add comment</span>
            </button>
        </form>
    </div>
</div>-->

<script type="text/template" id="answerUpdateTemplate">
    <form action="/issue/1/uploadFile" enctype="multipart/form-data" method="POST">
        <div style="margin:10px;">
            <input type="file" name="file" id="update_file"/>
            <button class="mdl-button" type="submit">upload file</button>
        </div>
    </form>
    <div class="mdl-color-text--primary-contrast mdl-card__supporting-text new-comment">
        <form class="submit-write" action="/api/issue/{{id}}/answers" method="POST">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <textarea rows=5 class="mdl-textfield__input" id="update_comment" name="comment"></textarea>
                <label for="comment" class="mdl-textfield__label">Leave a comment</label>
            </div>
            <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="updateAnswerBtn">
                <i class="material-icons" role="presentation">check</i><span class="visuallyhidden">add comment</span>
            </button>
        </form>
    </div>
</script>

{{/issue}}
{{/partial}}
{{> base }}

