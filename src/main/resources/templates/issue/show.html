<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Issue Tracking System</title>

    <link href='https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en'
          rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.blue_grey-orange.min.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<comment>
<div class="issues issues--wrap mdl-layout mdl-js-layout has-drawer is-upgraded">

    <header class="mdl-layout__header mdl-layout__header--waterfall">
        <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-subject">Issue Tracking System</span>
            <div class="mdl-layout-spacer"></div>
            <!-- Tabs -->
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="/">Issues</a>
                <a class="mdl-navigation__link" href="/milestones">Milestones</a>
                {{^ loginedUser}}
                <a class="mdl-navigation__link" href="/users/login">Login</a>
                <a class="mdl-navigation__link" href="/users/form">Join</a>
                {{/ loginedUser}}
                {{# loginedUser}}
                <a class="mdl-navigation__link" href="/users/logout">Logout</a>
                <a class="mdl-navigation__link" href="/users/{{id}}/form">My Info</a>
                {{/ loginedUser}}
            </nav>
        </div>
    </header>

    <main class="mdl-layout__content">
        <div class="issues-back">
            <a href="/" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon back-btn" title="go back"
               role="button">
                <i class="material-icons" role="presentation">arrow_back</i>
            </a>
        </div>
        <div class="issues__posts mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
                <div class="mdl-card__menu">
                    <a href="/issues/{{issue.id}}/form" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                        <i class="material-icons">edit</i>
                    </a>

                    <form action="/issues/{{issue.id}}" style="display:inline-block" method="POST">
                        <input type="hidden" name="_method" value="delete"/>
                        <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons">delete</i>
                        </button>
                    </form>

                </div>

                {{# issue}}
                <div class="mdl-card__title mdl-color-text--grey-50">
                    <i class="material-icons">check_circle</i>
                    <h2 class="mdl-card__title-text">{{subject}}</h2>
                </div>

                <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
                    <img class="minilogo" height="48" width="48"
                         src="https://avatars2.githubusercontent.com/u/520500?v=3&s=140" alt="javajigi">
                    <div style="margin-right:20px;">
                        <div class="author-text">
                            <strong>
                                <a href="https://github.com/javajigi" class="author">{{writer.userId}}</a>
                            </strong>
                        </div>
                        <span>2017-01-14</span>
                    </div>
                    <a href="/api/issues/{{issue.id}}/status" class="mdl-button mdl-button--colored mdl-js-button" id="close-button">
                        {{^ closed}}
                        Close issue
                        {{/ closed}}
                        {{# closed}}
                        Open issue
                        {{/ closed}}
                    </a>

                    <div class="section-spacer"></div>

                    <button id="milestone-menu" class="mdl-button mdl-js-button">
                        Milestone
                    </button>
                    <!-- milestone list -->

                    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                        for="milestone-menu">
                        {{# milestones}}
                        <a class=property-list href="/api/issues/{{issue.id}}/milestones/{{id}}">
                        <li class="mdl-menu__item">{{subject}}</li>
                        </a>
                        {{/ milestones}}
                    </ul>

                    <button id="label-menu" class="mdl-button mdl-js-button">
                        Label
                    </button>
                    <!-- label list -->
                    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                        for="label-menu">
                        {{# labels}}
                        <a class=property-list href="/api/issues/{{issue.id}}/labels/{{id}}">
                            <li class="mdl-menu__item">{{name}}</li>
                        </a>
                        {{/ labels}}
                    </ul>

                    <button id="assignee-menu" class="mdl-button mdl-js-button">
                        Assignee
                    </button>
                    <!-- label list -->
                    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                        for="assignee-menu">
                        {{# assignees}}
                        <a class=property-list href="/api/issues/{{issue.id}}/assignees/{{id}}">
                            <li class="mdl-menu__item">{{name}}</li>
                        </a>
                        {{/ assignees}}
                    </ul>
                </div>
                <div class="mdl-color-text--grey-700 mdl-card__supporting-text">
                    <p>{{comment}}</p>
                </div>
                <form action="/issue/1/uploadFile" enctype="multipart/form-data" method="POST">
                    <div style="margin:10px;">
                        <input type="file" name="file" id="file"/>
                        <button class="mdl-button" type="submit">upload file</button>
                    </div>
                </form>

                <div class="mdl-color-text--primary-contrast mdl-card__supporting-text comments">
                    {{# comments}}
                    <!-- comments start -->
                    <comment class="comment mdl-color-text--grey-700 comment-form" id="comment-{{id}}">
                        <header class="comment__header">
                            <img class="comment__avatar2" height="48" width="48"
                                 src="https://avatars2.githubusercontent.com/u/520500?v=3&s=140" alt="javajigi">
                            <div class="comment__author">
                                <strong>
                                    <a>{{writer.userId}}</a>
                                    <span>{{comment}}</span>
                                </strong>
                            </div>

                            <div class="comment-menu">
                                <a href="/api/issues/{{issue.id}}/comments/{{id}}" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect updateFrom_answer" id="updateForm_{{id}}">
                                    <i class="material-icons">edit</i>
                                </a>

                                <a class="link-delete-comment" href="/api/issues/{{issue.id}}/comments/{{id}}" style="display:inline-block">
                                    <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                                        <i class="material-icons">delete</i>
                                    </button>
                                </a>

                                <!--<form class="delete-comment" action="/api/issues/{{issue.id}}/comments/{{id}}" style="display:inline-block" method="POST" id="delete-comment-{{id}}">-->
                                    <!--<input type="hidden" name="_method" value="delete"/>-->
                                    <!--<button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button&#45;&#45;icon">-->
                                        <!--<i class="material-icons">delete</i>-->
                                    <!--</button>-->
                                <!--</form>-->
                            </div>
                        </header>
                        <hr>
                    </comment>
                    <!-- comments end -->
                    {{/ comments}}
                </div>
                <div class="mdl-color-text--primary-contrast mdl-card__supporting-text new-comment">
                    <form action="/api/issues/{{issue.id}}/comments" method="POST">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <textarea rows=5 class="mdl-textfield__input" id="comment" name="comment"></textarea>
                            <label for="comment" class="mdl-textfield__label">Leave a comment</label>
                        </div>
                        <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="add-comment">
                            <i class="material-icons" role="presentation">check</i><span class="visuallyhidden">add comment</span>
                        </button>
                    </form>
                </div>

                {{/ issue}}
            </div>
        </div>

        <footer class="mdl-mini-footer">
            <div class="mdl-mini-footer--left-section">
                <div class="mdl-logo mdl-color-text--grey-600">Proudly powered by <a href="https://github.com/Byeol">Byeol</a>
                </div>
            </div>
        </footer>
    </main>
    <div class="mdl-layout__obfuscator"></div>
</div>

<script type="text/template" id="commentTemplate">
    <comment class="comment mdl-color-text--grey-700 comment-form" id="comment-{3}">
        <header class="comment__header">
            <img class="comment__avatar2" height="48" width="48"
                 src="https://avatars2.githubusercontent.com/u/520500?v=3&s=140" alt="javajigi">
            <div class="comment__author">
                <strong>
                    <a>{0}</a>
                    <span>{1}</span>
                </strong>
            </div>

            <div class="comment-menu">
                <a href="/api/issues/{2}/comments/{3}" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect updateFrom_answer" id="updateForm_{3}">
                    <i class="material-icons">edit</i>
                </a>

                <a class="link-delete-comment" href="/api/issues/{2}/comments/{3}" style="display:inline-block">
                    <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                        <i class="material-icons">delete</i>
                    </button>
                </a>
            </div>
        </header>
        <hr>
    </comment>
</script>

<script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/main.js"></script>

</comment>
</html>